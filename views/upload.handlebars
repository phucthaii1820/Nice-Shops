<style>
figure{
    width:45%;
    position: relative;
}
#imageReview{
    width: 300px;
    height: 300px;
    object-fit: fill;
}
.unChosenImg{
    cursor: pointer;
    position: absolute;
    right: -10px;
    top: -10px;
}
</style>

<div class="m-auto" style="width:700px">
    <div class="text-2xl text-yellow-500 border-b pb-4">Đăng bài tin</div>
    <div class="flex md:flex-row flex-col w-full mt-4">
        <div class="w-full">
            <form action="/upload" method="post" enctype="multipart/form-data">
                <div>Tiêu đề*</div>
                <input name="title" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3" type="text" id="title" required>
                <div>Mô tả chi tiết*</div>
                <textarea name="description" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3" id="description"rows="4" class="form-control" placeholder="Ghi thông tin chi tiết sản phẩm của bạn tại đây" required></textarea>
                <div>Giá* (vnđ)</div>
                <input name="price" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3" id="price" onkeyup="test()" required>
                <div>Địa chỉ</div>
                <input name="address" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3" type="text" id="address">
                <div>Danh mục*</div>
                <select name="category" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3">
                    <option value="1" selected>Xe cộ</option>
                    <option value="2">Đồ điện tử</option>
                    <option value="3">Việc làm</option>
                    <option value="4">Thú cưng</option>
                    <option value="5">Đồ ăn - thực phẩm</option>
                    <option value="6">Tủ lạnh</option>
                    <option value="7">Đồ gia dụng</option>
                    <option value="8">Mẹ và bé</option>
                    <option value="9">Thời trang - đồ dùng cá nhân</option>
                    <option value="10">Giải trí</option>
                    <option value="11">Đồ văn phòng</option>
                </select>
                <div>Tình trạng*</div>
                <select name="statusProduct" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3">
                    <option value="0" selected>Mới</option>
                    <option value="1">Đã sử dụng</option>
                </select>
                <label>Chọn hình ảnh*:</label>
                <div class="bg-gray-200 border border-dotted rounded-md border-yellow-700 relative">
                    <input class="hidden" id="imageList" type="file" name="image" accept="image/png, image/jpeg" onchange="preview()" multiple>
                    <label for="imageList" class="cursor-pointer text-center py-14 block">
                         <i class="fa fa-camera" aria-hidden="true"></i> &nbsp; ĐĂNG TỪ 1 ĐẾN 3 HÌNH
                    </label>
                </div>
                <div class="relative m-auto flex gap-5 mt-5" id="previewImgs"></div>
                <button class="bg-yellow-500 text-white rounded-lg text-md py-2 w-full mt-5" type="submit">Đăng bài</button>
            </form>
        </div>
    </div>
</div>

<script>
    let fileInput = document.getElementById("imageList");
    let imageContainer = document.getElementById("previewImgs");
    function preview(){

        imageContainer.innerHTML = "";
        for (i of fileInput.files){
            let reader = new FileReader();
            let figure = document.createElement("figure");
            
            reader.onload=()=>{
                let img = document.createElement("img");
                img.setAttribute("src",reader.result);
                img.setAttribute("id","imageReview");
                figure.appendChild(img);
            }
            imageContainer.appendChild(figure);
            reader.readAsDataURL(i);
        }
    }
    function addCommas(str){
        return str.replace(/^0+/, '').replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function test(){
        var val = document.getElementById('price').value;
        document.getElementById('price').value = addCommas(val);
    }
</script>