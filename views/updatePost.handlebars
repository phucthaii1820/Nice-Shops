<style>
figure{
    width:45%;
    position: relative;
}
#imageReview{
    width: 220px;
    height: 220px;
    object-fit: fill;
}
.unChosenImg{
    cursor: pointer;
    position: absolute;
    right: -10px;
    top: -10px;
}
</style>

<div class="m-auto" style="width:700px">
    <div class="text-2xl text-yellow-500 border-b pb-4">Cập nhật tin</div>
    <div class="flex md:flex-row flex-col w-full mt-4">
        <div class="w-full">
            <form action="/upload" method="post" enctype="multipart/form-data">
                <div>Tiêu đề*</div>
                <input name="title" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3 p-2" type="text" id="title" value="{{post.title}}" required>
                <div>Mô tả chi tiết*</div>
                <textarea name="description" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3 h-72 p-2" id="description" rows="4" class="form-control" placeholder="Ghi thông tin chi tiết sản phẩm của bạn tại đây" required>{{post.description}}</textarea>
                <div>Giá* (vnđ)</div>
                <input name="price" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3 p-2" type="number" id="price" value="{{post.price}}"required>
                <div>Địa chỉ</div>
                <input name="address" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3 p-2" type="text" id="address" value="{{post.address}}">
                <div>Danh mục*</div>
                <span id="tempCat" class="hidden">{{post.category.categoryId}}</span>
                <select name="category" id="category" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3 p-2">
                    <option value="1">Xe cộ</option>
                    <option value="2">Đồ điện tử</option>
                    <option value="3">Việc làm</option>
                    <option value="4">Thú cưng</option>
                    <option value="5">Đồ ăn - thực phẩm</option>
                    <option value="6">Tủ lạnh</option>
                    <option value="7">Đồ gia dụng</option>
                    <option value="8">Mẹ và bé</option>
                    <option value="9">Thời trang - đồ dùng cá nhân</option>
                    <option value="10">Giải trí</option>
                    <option value="11">Đồ văn phòng</option>
                </select>
                <div>Tình trạng*</div>
                <select name="statusProduct" class="bg-gray-200 w-full focus:outline-none px-2 rounded-md mb-3 p-2">
                    <option value="0">Mới</option>
                    <option value="1">Đã sử dụng</option>
                </select>
                <label>Chọn hình ảnh*:</label>
                <div class="bg-gray-200 border border-dotted rounded-md border-yellow-700 relative">
                    <input name="image" class="hidden" id="image" type="file" name="image" accept="image/png, image/jpeg" onchange="preview()"required multiple>
                    <label for="image" class="cursor-pointer text-center py-14 block">
                        <i class="fa fa-camera" aria-hidden="true"></i> &nbsp; ĐĂNG TỪ 1 ĐẾN 6 HÌNH
                    </label>
                </div>
                <div class="relative m-auto flex gap-5 mt-5" id="previewImgs">
                    {{#each post.Image}}
                        <figure>
                            <img src="data:image/jpeg;base64,{{this}}" id="imageReview">
                        </figure>
                    {{/each}}
                </div>
                <button class="bg-yellow-500 text-white rounded-lg text-md py-2 w-full mt-5" type="submit">Cập nhật</button>
            </form>
        </div>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script> 
    $( document ).ready(function() {
        const value = $("#tempCat").text();
        $('#category').val(value);
    });
    let fileInput = document.getElementById("image");
    let imageContainer = document.getElementById("previewImgs");
    function preview(){
        imageContainer.innerHTML = "";
        for (i of fileInput.files){
            let reader = new FileReader();
            let figure = document.createElement("figure");
            
            reader.onload=()=>{
                let img = document.createElement("img");
                img.setAttribute("src",reader.result);
                img.setAttribute("id","imageReview");
                figure.appendChild(img);
            }
            imageContainer.appendChild(figure);
            reader.readAsDataURL(i);
        }
    }
</script>